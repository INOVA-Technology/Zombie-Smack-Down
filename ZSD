#!/usr/bin/env ruby

if ARGV[0] == '-t'
  require "./ZSDFiles/game"
else
  require "/usr/local/bin/ZSDFiles/game"
end
require "readline"

def start hero
  yep = ["punch", "kick", "combo", "heal", "combolist", "info", "quit", "taunt"]

  while true
  	case hero.prefs[:kills]
  	when 0, 1, 2
  		e = Stuff::Zombie.new hero
    when 3, 4, 5
      e = Stuff::BigZombie.new hero
    when 6, 7, 8
      e = Stuff::DaddyZombie.new hero
    when 9, 10, 11
      e = Stuff::GunZombie.new hero
    when 12, 13, 14
      e = Stuff::NinjaZombie.new hero 
    when 15, 16, 17
      e = Stuff::IdiotZombie.new hero 
    when 18, 19, 20 
      e = Stuff::BlindZombie.new hero 
    else
      hero.win
      break
    end

  	while e.is_alive
  		puts "Type any of the following: " + yep.join(", ")

      input = Readline.readline.squeeze.strip.downcase

  		case input
  		when "punch"
        hero.attack e, "punch"
        e.attack
      when "kick"
        hero.attack e, "kick"
        e.attack
      when "info"
      	hero.info
        e.info
      when "quit"
      	hero.quit
      when "combolist"
        hero.comboList
      when "combo"
      	hero.attack e, "combo"
      	e.attack if hero.r != 0
      when "heal"
      	hero.heal
      when "taunt"
        hero.taunt
      else
      	puts "Input invalid"
      end
    end
			
  end
end

def main
	game = Stuff::Game.new

	start game
end

if __FILE__ == $0
	main
end